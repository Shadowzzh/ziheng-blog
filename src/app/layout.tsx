import type { Metadata } from 'next';
import type React from 'react';

import './globals.css';

import { LayoutHeader } from '@/app/Header';
import { cn } from '@/utils';
import { ThemeProvider } from '@/components/ThemeProvider';
import { inter } from '@/config/font';
import { WebVitals } from '@/components/WebVitals';
import { routerMapping } from '@/config/routerMapping';
import { LayoutHeaderExtra } from './HeaderExtra';
import { ProgressBar } from './ProgressBar';
import { LayoutBreadcrumb } from './Breadcrumb';
import { Toaster } from '@/components/ui/sonner';
import { LayoutHeaderToc } from './HeaderToc';

export const metadata: Metadata = {
  title: 'Create Next App',
  description: 'Generated by create next app'
};

export default function RootLayout({
  children
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang='en' className={inter.className} suppressHydrationWarning={true}>
      <WebVitals />

      <body className={cn('antialiased bg-background')}>
        <ThemeProvider attribute='class' defaultTheme='dark' enableSystem disableTransitionOnChange>
          <ProgressBar className='fixed top-0 h-[0.1rem] dark:bg-neutral-500 bg-neutral-700 z-[999]' />

          <div
            id='layout-header'
            className={cn(
              'w-screen',
              'backdrop-blur',
              'bg-background/80',
              'sticky z-[9] top-0',
              'touch-none'
            )}
          >
            <LayoutHeader className={cn('sm:h-16 h-12')} />
            <LayoutHeaderExtra Breadcrumb={<LayoutBreadcrumb routerMapping={routerMapping} />} />
          </div>

          <LayoutHeaderToc />

          <main className={cn()}>{children}</main>
        </ThemeProvider>
      </body>

      <Toaster />
    </html>
  );
}
